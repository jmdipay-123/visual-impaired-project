<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Home | Object Recognition and Navigation for Visually Impaired Person</title>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <style>
    .image-display-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }

    @media (max-width: 768px) {
      .image-display-grid {
        grid-template-columns: 1fr;
      }
    }

    .image-box {
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 15px;
      background: #f9f9f9;
      min-height: 300px;
      display: flex;
      flex-direction: column;
    }

    .image-box.active {
      border-color: #6c63ff;
      background: #f8f9ff;
    }

    .image-box.result-active {
      border-color: #28A745;
      background: #f8fff8;
    }

    .image-box-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
      font-weight: 600;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .image-box-header.preview-header {
      color: #666;
    }

    .image-box-header.result-header {
      color: #28A745;
    }

    .image-box-content {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      overflow: hidden;
      background: white;
      position: relative;
    }

    .image-box-content img,
    .image-box-content video {
      max-width: 100%;
      max-height: 100%;
      width: 100%;
      height: auto;
      object-fit: contain;
      border-radius: 8px;
      cursor: pointer;
    }

    .placeholder-content {
      text-align: center;
      color: #999;
      padding: 40px 20px;
    }

    .placeholder-content i {
      font-size: 48px;
      margin-bottom: 10px;
      opacity: 0.3;
    }

    .loading-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.95);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #6c63ff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .loading-text {
      margin-top: 15px;
      color: #6c63ff;
      font-weight: 600;
    }

    .loading-subtext {
      margin-top: 5px;
      color: #999;
      font-size: 12px;
    }

    .detection-badge {
      display: inline-block;
      padding: 4px 8px;
      background: #28A745;
      color: white;
      border-radius: 4px;
      font-size: 11px;
      margin-left: auto;
    }
  </style>
</head>

<body>
  <div class="menu-backdrop"></div>
  <header>
    <div class="container">
      <button class="menu-toggle"><i class="fas fa-bars"></i></button>
      <a style="color: #fff;text-decoration: none;" href="./index.html">
        <h1 style="vertical-align: middle;" data-i18n="siteName">Object Recognition and Navigation</h1>
      </a>
      <nav>
        <ul id="navMenu">
          <li><a href="./index.html" data-i18n="home">Home</a></li>
          <li><a href="./information.html" data-i18n="objectInfo">Object information</a></li>
          <li><a href="./location.html" data-i18n="navLoc">Location</a></li>
          <li>
            <select id="languageSelector">
              <option value="en">ðŸ‡ºðŸ‡¸ English</option>
              <option value="tl">ðŸ‡µðŸ‡­ Tagalog</option>
              <option value="ceb">ðŸ‡µðŸ‡­ Cebuano</option>
            </select>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <main style="padding-top: 5vh;" class="container">
    <section id="home" class="hero-section">
      <h2 data-i18n="heroTitle">
        Enhancing Object Recognition and Navigation for Visually Impaired Person using Deep Learning Algorithm
      </h2>
      <p data-i18n="heroDescription">
        Integrating deep-learning object detection to deliver real-time guidance and obstacle alerts for visually
        impaired users.
      </p>

      <div class="feature-grid">
        <div class="feature-card" data-target="detect" data-action="capture">
          <i class="fas fa-camera"></i>
          <h3 data-i18n="captureTitle">Capture Image</h3>
          <p data-i18n="captureDesc">Use your device camera to capture an object.</p>
        </div>

        <div class="feature-card" data-target="detect" data-action="upload">
          <i class="fas fa-upload"></i>
          <h3 data-i18n="uploadTitle">Upload Image</h3>
          <p data-i18n="uploadDesc">Upload an image from your gallery for analysis.</p>
        </div>

        <div class="feature-card" data-target="information">
          <i class="fas fa-lightbulb"></i>
          <h3 data-i18n="infoTitle">Object Information</h3>
          <p data-i18n="infoDesc">Learn more about Object Recognition and Navigation and their impact.</p>
        </div>
      </div>
    </section>


    <section id="detect" class="detection-section">
      <h2 data-i18n="detectTitle">Detect Objects</h2>
      <div class="upload-area">
        <p data-i18n="detectInstructions">Select or capture an image for object detection:</p>
        <input type="file" id="imageInput" accept="image/jpeg,image/jpg,image/png,image/webp" style="display: none;">
        <button id="startCameraBtn" class="btn primary-btn"><i class="fas fa-camera"></i> <span
            data-i18n="useCamera">Use Camera</span></button>
        <button id="uploadBtn" class="btn primary-btn"><i class="fas fa-upload"></i> <span
            data-i18n="uploadImage">Upload Image</span></button>
        <button id="captureBtn" class="btn success-btn" style="display:none;"><i class="fas fa-circle"></i> <span
            data-i18n="capturePhoto">Capture Photo</span></button>

        <!-- Image Display Grid -->
        <div class="image-display-grid">
          <!-- Original/Preview Box -->
          <div class="image-box" id="previewBox">
            <div class="image-box-header preview-header">
              <i class="fas fa-image"></i>
              <span data-i18n="originalImage">Original Image</span>
            </div>
            <div class="image-box-content" id="previewContent">
              <video id="videoPreview" autoplay playsinline style="display:none;"></video>
              <img id="imagePreview" style="display:none;">
              <div class="placeholder-content" id="previewPlaceholder">
                <i class="fas fa-image"></i>
                <p data-i18n="noImageSelected">No image selected</p>
              </div>
            </div>
          </div>

          <!-- Result Box -->
          <div class="image-box" id="resultBox">
            <div class="image-box-header result-header">
              <i class="fas fa-check-circle"></i>
              <span data-i18n="detectionResult">Detection Result</span>
              <span class="detection-badge" id="detectionCount" style="display:none;">0 <span
                  data-i18n="objects">objects</span></span>
            </div>
            <div class="image-box-content" id="resultContent">
              <img id="result" style="display:none;">
              <div class="placeholder-content" id="resultPlaceholder">
                <i class="fas fa-search"></i>
                <p data-i18n="resultWillAppear">Analysis result will appear here</p>
              </div>
              <!-- Loading Overlay -->
              <div class="loading-overlay" id="loadingOverlay" style="display:none;">
                <div class="spinner"></div>
                <div class="loading-text" data-i18n="analyzing">Analyzing Image...</div>
                <div class="loading-subtext" data-i18n="mayTakeTime">This may take 5-15 seconds</div>
              </div>
            </div>
          </div>
        </div>

        <button id="analyzeImageBtn" class="btn success-btn" disabled style="margin-top: 20px; display:none;">
          <i class="fas fa-search"></i> <span data-i18n="analyzeImage">Analyze Image</span>
        </button>
      </div>

      <div id="resultsSection" class="results-area" style="display:none;">
        <h3 data-i18n="detectedObjects">Detected Objects</h3>
        <ul id="resultList" style="list-style: none; padding: 0;">
          <!-- Results will be populated here by script.js -->
        </ul>
      </div>
      <audio id="ttsAudio" preload="none" crossorigin="anonymous"></audio>

    </section>

  </main>

  <footer>
    <div class="container">
      <p data-i18n="copyright">&copy; 2025 Object Recognition and Navigation. All rights reserved.</p>
    </div>
  </footer>

  <!-- Fullscreen image modal -->
  <div id="imageModal" class="modal"
    style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:9999; justify-content:center; align-items:center; cursor:pointer;">
    <img id="modalImg" src="" style="object-fit: contain;object-position: center;width:100%; max-height:90%;">
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Mobile menu toggle
      const menuToggle = document.querySelector('.menu-toggle');
      const navMenu = document.querySelector('nav');
      const backdrop = document.querySelector('.menu-backdrop');

      if (menuToggle && navMenu) {
        menuToggle.addEventListener('click', function (e) {
          e.stopPropagation();
          navMenu.classList.toggle('show');
          backdrop.classList.toggle('show'); // Add this line
          document.body.classList.toggle('menu-open'); // Add this line

          // Change icon
          const icon = menuToggle.querySelector('i');
          if (navMenu.classList.contains('show')) {
            icon.classList.remove('fa-bars');
            icon.classList.add('fa-times');
          } else {
            icon.classList.remove('fa-times');
            icon.classList.add('fa-bars');
          }
        });

        // Close menu when clicking backdrop
        backdrop.addEventListener('click', function () {
          navMenu.classList.remove('show');
          backdrop.classList.remove('show');
          document.body.classList.remove('menu-open');
          const icon = menuToggle.querySelector('i');
          icon.classList.remove('fa-times');
          icon.classList.add('fa-bars');
        });

        // Close menu when clicking a link
        document.querySelectorAll('#navMenu a').forEach(link => {
          link.addEventListener('click', function () {
            navMenu.classList.remove('show');
            const icon = menuToggle.querySelector('i');
            icon.classList.remove('fa-times');
            icon.classList.add('fa-bars');
          });
        });
      }

      // Smooth scroll for internal nav
      document.querySelectorAll("#navMenu a[data-target]").forEach((menuItem) => {
        menuItem.addEventListener("click", function (e) {
          e.preventDefault();
          const targetId = this.getAttribute("data-target");
          const targetSection = document.getElementById(targetId);

          if (targetSection) {
            targetSection.scrollIntoView({ behavior: "smooth", block: "start" });
          }
        });
      });

      // If URL contains hash, scroll to it
      const hash = window.location.hash;
      if (hash) {
        const sectionId = hash.substring(1);
        const targetSection = document.getElementById(sectionId);

        if (targetSection) {
          setTimeout(() => {
            targetSection.scrollIntoView({ behavior: "smooth", block: "start" });
          }, 100);
        }
      }
    });
  </script>

  <script>
    document.querySelectorAll('.feature-card').forEach(card => {
      card.addEventListener('click', () => {
        const targetId = card.getAttribute('data-target');
        const actionType = card.getAttribute('data-action');
        const targetSection = document.getElementById(targetId);

        if (targetSection) {
          targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Trigger specific actions based on data-action
        setTimeout(() => {
          if (actionType === 'capture') {
            document.getElementById('startCameraBtn')?.click();
          } else if (actionType === 'upload') {
            document.getElementById('uploadBtn')?.click();
          }
        }, 500);

        if (targetId === 'information') {
          window.location.href = '/information.html';
        }
      });
    });
  </script>

  <script>
    // Fullscreen image viewer
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImg');
    const resultImgs = document.getElementById('result');
    const imagePreview = document.getElementById('imagePreview');

    // Make both preview and result clickable for fullscreen
    if (resultImgs) {
      resultImgs.addEventListener('click', () => {
        if (resultImgs.src && resultImgs.style.display !== 'none') {
          modalImg.src = resultImgs.src;
          modal.style.display = 'flex';
        }
      });
    }

    if (imagePreview) {
      imagePreview.addEventListener('click', () => {
        if (imagePreview.src && imagePreview.style.display !== 'none') {
          modalImg.src = imagePreview.src;
          modal.style.display = 'flex';
        }
      });
    }

    if (modal) {
      modal.addEventListener('click', () => {
        modal.style.display = 'none';
        modalImg.src = '';
      });
    }

    // Language Switcher
    document.addEventListener('DOMContentLoaded', () => {
      const languageSelector = document.getElementById('languageSelector');

      if (languageSelector) {
        languageSelector.addEventListener('change', (e) => {
          const selectedLang = e.target.value;
          setLanguage(selectedLang);
          applyTranslations();

          // Show confirmation
          console.log(`Language changed to: ${selectedLang}`);
        });
      }
    });
  </script>

  <!-- Main detection script - handles all camera and detection logic -->
  <script src="./translations.js" defer></script>
  <script src="./home.js" defer></script>
  <script src="./loc.js" defer></script>
  <script src="./script.js" defer></script>



</body>

</html>